[Apply the PDF download fix: in the downloadPdf event, replace the mobile download section with the following code:

if (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)) {
    // Create a blob with correct MIME type
    const pdfBlob = pdf.output('blob');
    const blob = new Blob([pdfBlob], { type: 'application/pdf' });
    const blobUrl = URL.createObjectURL(blob);

    // Create a temporary anchor element
    const a = document.createElement('a');
    a.href = blobUrl;
    a.download = filename.endsWith('.pdf') ? filename : filename + '.pdf'; // Ensure .pdf extension
    document.body.appendChild(a);
    a.click();

    setTimeout(() => {
        document.body.removeChild(a);
        URL.revokeObjectURL(blobUrl);
    }, 100);
} else {
    pdf.save(filename.endsWith('.pdf') ? filename : filename + '.pdf');
}

The rest of the file remains unchanged.]