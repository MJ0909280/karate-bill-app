<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lions Karate Club - Invoice Generator</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    :root{
      --bg:#0b1220;
      --fg:#fff;
      --muted:rgba(255,255,255,0.7);
      --accent:#f59e0b;
      --card:#0f1724;
      --primary:#2563eb;
      --success:#10b981;
      --danger:#ef4444;
      --warning:#f59e0b;
      --info:#3b82f6;
      --border:#334155;
    }
    *{box-sizing:border-box;font-family:'Segoe UI', system-ui, -apple-system, sans-serif;}
    body{background:#0f172a;margin:0;padding:20px;display:flex;justify-content:center;min-height:100vh;color:var(--fg);}
    .app{width:100%;max-width:1200px}
    h1{margin:0 0 20px;font-size:24px;color:var(--accent);display:flex;align-items:center;gap:10px;}
    .controls{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:15px;margin-bottom:20px}
    input[type=text], input[type=date], input[type=number], select, textarea {
      padding:12px;
      border:1px solid var(--border);
      border-radius:8px;
      width:100%;
      background:var(--card);
      color:var(--fg);
      font-size:14px;
    }
    textarea{min-height:80px;resize:vertical}
    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      padding:12px 16px;
      border-radius:8px;
      border:0;
      background:var(--accent);
      color:#111;
      font-weight:600;
      cursor:pointer;
      font-size:14px;
    }
    .btn.secondary{background:#334155;color:#fff;}
    .btn.danger{background:var(--danger);color:#fff;}
    .btn.success{background:var(--success);color:#fff;}
    .btn.info{background:var(--info);color:#fff;}
    .row{display:flex;gap:12px}
    .card{
      background:var(--card);
      padding:20px;
      border-radius:12px;
      border:1px solid var(--border);
    }
    .invoice-wrap{margin-top:20px;display:flex;gap:20px;flex-direction:column;align-items:center;}
    .invoice {
      width: 794px;
      max-width:100%;
      background:var(--bg);
      color:var(--fg);
      padding:35px;
      border-radius:12px;
      font-size:15px;
      line-height:1.4;
      position:relative;
    }
    .invoice::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, var(--accent), var(--primary), var(--success));
    }
    .inv-top{
      display:flex;
      justify-content:space-between;
      align-items:flex-start;
      gap:20px;
      margin-bottom:30px;
      padding-bottom:20px;
      border-bottom:1px solid rgba(255,255,255,0.1);
    }
    .brand{display:flex;gap:15px;align-items:center;}
    .logo-preview{
      width:90px;
      height:90px;
      border-radius:12px;
      overflow:hidden;
      display:flex;
      align-items:center;
      justify-content:center;
      border:2px solid rgba(255,255,255,0.1);
    }
    .logo-preview img{max-width:100%;max-height:100%;object-fit:contain;}
    .brand h2{margin:0 0 8px;font-size:22px;letter-spacing:0.8px;color:var(--accent);}
    .brand-info{font-size:13px;color:var(--muted);line-height:1.5;}
    .meta{text-align:right;font-size:14px;color:var(--muted);}
    .meta .label{display:block;font-weight:600;color:var(--fg);font-size:14px;margin-bottom:5px;}
    .items{margin:25px 0;border-collapse:collapse;width:100%;}
    .items th, .items td{padding:12px 10px;border-bottom:1px solid rgba(255,255,255,0.08);}
    .items th{font-weight:600;text-align:left;color:var(--muted);font-size:13px;text-transform:uppercase;letter-spacing:0.5px;}
    .items td{font-size:14px;}
    .items .right{text-align:right;}
    .items .center{text-align:center;}
    .totals{margin:25px 0;display:flex;justify-content:flex-end;}
    .totals table{width:350px;border-collapse:separate;border-spacing:0;}
    .totals td{padding:10px;}
    .notes{
      margin:25px 0;
      color:var(--muted);
      font-size:13px;
      padding:15px;
      background:rgba(255,255,255,0.05);
      border-radius:8px;
      border-left:3px solid var(--accent);
    }
    .signature{
      margin-top:30px;
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding-top:20px;
      border-top:1px solid rgba(255,255,255,0.1);
    }
    .sign-box{
      width:220px;
      height:60px;
      border-top:1px dashed rgba(255,255,255,0.2);
      text-align:center;
      color:var(--muted);
      padding-top:10px;
      font-size:13px;
    }
    .upi-row{
      display:flex;
      gap:20px;
      align-items:center;
      margin:25px 0;
      padding:20px;
      background:rgba(255,255,255,0.05);
      border-radius:10px;
      border:1px solid rgba(255,255,255,0.1);
    }
    .qr{
      width:110px;
      height:110px;
      background:#fff;
      padding:8px;
      border-radius:8px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .qr img{width:100%;height:100%;object-fit:contain;}
    .upi-info{flex:1;}
    .upi-info h4{margin:0 0 8px;color:var(--accent);font-size:16px;}
    .upi-id{
      font-weight:700;
      font-size:18px;
      margin:10px 0;
      color:var(--fg);
      word-break:break-all;
    }
    .small-muted{font-size:13px;color:var(--muted);margin:5px 0;}
    .items-editor{margin-top:15px;}
    .items-editor table{
      width:100%;
      border-collapse:collapse;
      background:var(--card);
      border-radius:8px;
      overflow:hidden;
    }
    .items-editor th, .items-editor td{padding:12px;border-bottom:1px solid var(--border);}
    .items-editor th{background:rgba(37, 99, 235, 0.1);color:var(--fg);font-weight:600;}
    .items-editor input{
      padding:10px;
      width:100%;
      border:1px solid var(--border);
      border-radius:6px;
      background:var(--bg);
      color:var(--fg);
    }
    .items-editor .desc-col{width:40%}
    .items-editor .qty-col{width:15%}
    .items-editor .price-col{width:15%}
    .items-editor .amount-col{width:15%}
    .items-editor .action-col{width:15%}
    .controls-compact{display:flex;gap:12px;flex-wrap:wrap;margin-top:15px;}
    .muted{color:#94a3b8;}
    .section-title{
      font-size:18px;
      margin:0 0 15px;
      color:var(--accent);
      display:flex;
      align-items:center;
      gap:10px;
    }
    .section{margin-bottom:25px;}
    @media (max-width:900px){ 
      .invoice{padding:25px} 
      .logo-preview{width:70px;height:70px} 
      .brand h2{font-size:18px}
      .controls{grid-template-columns:1fr;}
      .row{flex-direction:column;}
      .upi-row{flex-direction:column;align-items:flex-start;gap:15px;}
    }
    @media print {
      body{background:#fff;padding:0;}
      .invoice{box-shadow:none;border-radius:0;zoom:1}
      .card{display:none;}
    }
    input[type=number]::-webkit-outer-spin-button,
    input[type=number]::-webkit-inner-spin-button {
      -webkit-appearance: none;
      margin: 0;
    }
    input[type=number] {-moz-appearance: textfield;}
  </style>
</head>
<body>
  <div class="app">
    <h1>ü•ã Lions Karate Club ‚Äî Professional Invoice Generator</h1>

    <div class="card">
      <div class="section">
        <h3 class="section-title">üè¢ Club Information</h3>
        <div class="controls">
          <input id="clubName" placeholder="Club name" value="LIONS KARATE CLUB PUNE">
          <input id="regNumber" placeholder="Registration number" value="LKP-2025">
          <input id="clubAddress" placeholder="Club address" value="Manaji Nagar, Nahre, Pune">
          <input id="clubPhone" placeholder="Club phone" value="9049688172">
        </div>
      </div>

      <div class="section">
        <h3 class="section-title">üìÑ Invoice Details</h3>
        <div class="controls">
          <input id="invoiceNumber" placeholder="Invoice number">
          <input id="receiptNumber" placeholder="Receipt number (optional)">
          <select id="receiptPosition" title="Position of receipt number">
            <option value="top">Receipt top</option>
            <option value="bottom">Receipt bottom</option>
          </select>
          <input id="date" type="date">
          <input id="studentName" placeholder="Student / Customer name">
          <select id="status">
            <option>Unpaid</option>
            <option>Paid</option>
            <option>Pending</option>
          </select>
          <select id="theme">
            <option value="dark">Dark (on-screen)</option>
            <option value="light">Light (print)</option>
          </select>
        </div>
      </div>

      <div class="section">
        <h3 class="section-title">üßæ Items</h3>
        <div style="display:flex;gap:20px;align-items:flex-start;">
          <div style="flex:1">
            <div class="items-editor">
              <table id="itemsTable">
                <thead>
                  <tr>
                    <th class="desc-col">Description</th>
                    <th class="qty-col">Qty</th>
                    <th class="price-col">Price (‚Çπ)</th>
                    <th class="amount-col">Amount (‚Çπ)</th>
                    <th class="action-col"></th>
                  </tr>
                </thead>
                <tbody id="itemsBody"></tbody>
                <tfoot>
                  <tr>
                    <td><input id="newDesc" placeholder="New item description"></td>
                    <td><input id="newQty" type="number" min="1" step="1" value="1"></td>
                    <td><input id="newPrice" type="number" min="0" step="0.01" value="0"></td>
                    <td colspan="2"><button id="addItemBtn" class="btn secondary">‚ûï Add</button></td>
                  </tr>
                </tfoot>
              </table>
            </div>
          </div>

          <div style="width:300px">
            <div class="section">
              <h3 class="section-title">üí∞ Financials</h3>
              <div style="display:grid;gap:12px">
                <div class="row">
                  <label class="small-muted" style="width:100%;">Tax (%)</label>
                  <input id="taxPercent" type="number" min="0" step="0.01" value="0">
                </div>
                <div class="row">
                  <label class="small-muted" style="width:100%;">Discount (%)</label>
                  <input id="discountPercent" type="number" min="0" step="0.01" value="0">
                </div>
                <div>
                  <label class="small-muted">UPI Phone Number</label>
                  <input id="upiId" value="9049688172">
                </div>
                <div>
                  <label class="small-muted">Payment Verified By</label>
                  <input id="verifiedBy" placeholder="Name of verifier" value="LIONS KARATE CLUB PUNE">
                </div>
                <div>
                  <label class="small-muted">Notes</label>
                  <textarea id="notes" placeholder="Additional notes">Once fees are paid, they are non-refundable.</textarea>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="controls-compact">
        <button id="exportJson" class="btn info">üì§ Export JSON</button>
        <button id="exportCsv" class="btn info">üìä Export CSV</button>
        <button id="downloadPdf" class="btn success">üìÑ Download PDF</button>
        <button id="printBtn" class="btn secondary">üñ®Ô∏è Print</button>
        <button id="resetBtn" class="btn danger">üîÑ Reset All</button>
      </div>
    </div>

    <div class="invoice-wrap">
      <div id="invoicePreview" class="invoice">
        <div class="inv-top">
          <div class="brand">
            <div class="logo-preview" id="logoPreview" title="Logo preview">
              <img src="https://i.postimg.cc/65RJj14f/LIONS-l-OGO.png" alt="Lions Karate Club Logo" id="logoImage">
            </div>
            <div>
              <h2 id="pvClub">LIONS KARATE CLUB PUNE</h2>
              <div class="brand-info">
                <div id="pvReg">Reg. No: LKP-2025</div>
                <div id="pvAddress">Manaji Nagar, Nahre, Pune ¬∑ 9049688172</div>
              </div>
            </div>
          </div>

          <div class="meta">
            <div id="pvInvoiceLabel" style="font-size:24px;font-weight:800;color:var(--accent)">INVOICE</div>
            <div id="pvInvoiceNo" class="label"></div>
            <div id="pvReceiptNo" class="label"></div>
            <div id="pvDate" class="label small-muted"></div>
            <div id="pvStudent" class="small-muted"></div>
            <div class="small-muted" id="pvStatus"></div>
          </div>
        </div>

        <table class="items" aria-hidden="false">
          <thead>
            <tr>
              <th>Description</th>
              <th class="center">Qty</th>
              <th class="right">Price (‚Çπ)</th>
              <th class="right">Amount (‚Çπ)</th>
            </tr>
          </thead>
          <tbody id="pvItems"></tbody>
        </table>

        <div class="totals">
          <table>
            <tbody>
              <tr><td class="muted">Subtotal</td><td class="right" id="pvSubtotal">‚Çπ0.00</td></tr>
              <tr><td class="muted">Tax (<span id="pvTaxPercent">0</span>%)</td><td class="right" id="pvTax">‚Çπ0.00</td></tr>
              <tr><td class="muted">Discount (<span id="pvDiscountPercent">0</span>%)</td><td class="right" id="pvDiscount">- ‚Çπ0.00</td></tr>
              <tr style="border-top:2px solid rgba(255,255,255,0.15)"><td style="font-weight:700;font-size:16px">Grand Total</td><td class="right" id="pvTotal" style="font-weight:700;font-size:16px">‚Çπ0.00</td></tr>
            </tbody>
          </table>
        </div>

        <div class="upi-row">
          <div class="upi-info">
            <h4>üí≥ UPI Payment</h4>
            <div class="small-muted">Scan QR code or use UPI ID to pay</div>
            <div class="upi-id" id="pvUpiText">9049688172@upi</div>
            <div class="small-muted">Pay using PhonePe, Google Pay, Paytm or any UPI app</div>
          </div>
          <div class="qr" id="pvQr">
            <img src="https://i.postimg.cc/HnXZ2RvJ/Whats-App-Image-2025-08-08-at-14-45-04-3acef023.jpg" alt="QR Code" id="pvQrImg"/>
          </div>
        </div>

        <div class="notes" id="pvNotes">Once fees are paid, they are non-refundable.</div>

        <div class="signature">
          <div class="small-muted">Payment Verified By: <strong id="pvPrepared">LIONS KARATE CLUB PUNE</strong></div>
          <div class="sign-box">Payment Verified</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Utility functions
    const %%%LATEX_BLOCK_0%%%('itemsBody');
      tbody.innerHTML = '';
      items.forEach((it, idx) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
          <td><input data-idx="${idx}" data-field="desc" value="${escapeHtml(it.desc)}"></td>
          <td><input data-idx="${idx}" data-field="qty" type="number" min="1" step="1" value="${it.qty}"></td>
          <td><input data-idx="${idx}" data-field="price" type="number" min="0" step="0.01" value="${it.price}"></td>
          <td class="right">‚Çπ${formatINR(it.qty * it.price)}
          üóëÔ∏è</button></td>`; tbody.appendChild(tr); }); // Wire up inputs tbody.querySelectorAll('input').forEach(inp => { inp.addEventListener('input', e => { const idx = parseInt(e.target.dataset.idx); const field = e.target.dataset.field; const val = e.target.type === 'number' ? parseFloat(e.target.value) || 0 : e.target.value; if (field === 'qty' || field === 'price') { items[idx][field] = val; const row = e.target.closest('tr'); const amountCell = row.cells[3]; amountCell.textContent = '‚Çπ' + formatINR(items[idx].qty * items[idx].price); } else { items[idx][field] = val; } renderInvoice(); }); }); // Wire up delete buttons tbody.querySelectorAll('button').forEach(btn => { btn.addEventListener('click', e => { const idx = parseInt(btn.dataset.idx); items.splice(idx, 1); renderInvoice(); renderItemsEditor(); }); }); } // Add new item function addNewItem() { const d = %%%LATEX_BLOCK_5%%%('newQty').value) || 1; const p = parseFloat(%%%LATEX_BLOCK_6%%%('newDesc').value = ''; %%%LATEX_BLOCK_7%%%('newPrice').value = '0'; renderInvoice(); renderItemsEditor(); } // Render invoice preview function renderInvoice() { // Theme switch const theme = %%%LATEX_BLOCK_8%%%('pvClub').textContent = %%%LATEX_BLOCK_9%%%('pvReg').textContent = %%%LATEX_BLOCK_10%%%{%%%LATEX_BLOCK_11%%%('pvAddress').textContent = %%%LATEX_BLOCK_12%%%('clubPhone').value ? `${$('clubAddress').value} ¬∑ ${$('clubPhone').value}` : (%%%LATEX_BLOCK_15%%%('clubPhone').value || ''); %%%LATEX_BLOCK_16%%%('verifiedBy').value || %%%LATEX_BLOCK_17%%%('pvNotes').textContent = %%%LATEX_BLOCK_18%%%('invoiceNumber').value; %%%LATEX_BLOCK_19%%%{inv}` : ''; $('pvReceiptNo').textContent = $('receiptNumber').value ? `Receipt No: %%%LATEX_BLOCK_21%%%('receiptNumber').value}` : ''; // Receipt position const rpos = $('receiptPosition').value; if (rpos === 'top') { $('pvReceiptNo').style.display = $('receiptNumber').value ? 'block' : 'none'; } else { $('pvReceiptNo').style.display = 'none'; } // Date and student $('pvDate').textContent = $('date').value ? `Date: %%%LATEX_BLOCK_25%%%('date').value).toLocaleDateString('en-IN')}` : ''; $('pvStudent').textContent = $('studentName').value ? `Student: %%%LATEX_BLOCK_27%%%('studentName').value}` : ''; $('pvStatus').textContent = $('status').value ? `Status: %%%LATEX_BLOCK_29%%%('status').value}` : ''; // Items table const pvItems = $('pvItems'); pvItems.innerHTML = ''; let subtotal = 0; items.forEach(it => { if (!(it.desc || it.qty || it.price)) return; const amount = it.qty * it.price; subtotal += amount; const tr = document.createElement('tr'); tr.innerHTML = ` ${escapeHtml(it.desc)}</td> <td class="center">${it.qty} ‚Çπ${formatINR(it.price)}</td> <td class="right">‚Çπ${formatINR(amount)}`; pvItems.appendChild(tr); }); // Financial calculations const taxPct = clamp(Number($('taxPercent').value), 0); const discPct = clamp(Number($('discountPercent').value), 0); const taxAmt = (subtotal * taxPct) / 100; const discAmt = (subtotal * discPct) / 100; const total = subtotal + taxAmt - discAmt; $('pvSubtotal').textContent = '‚Çπ' + formatINR(subtotal); $('pvTax').textContent = '‚Çπ' + formatINR(taxAmt); $('pvDiscount').textContent = '- ‚Çπ' + formatINR(discAmt); $('pvTotal').textContent = '‚Çπ' + formatINR(total); $('pvTaxPercent').textContent = taxPct; $('pvDiscountPercent').textContent = discPct; // UPI information const upiPhone = $('upiId').value.trim() || '9049688172'; const upiId = `%%%LATEX_BLOCK_37%%%('pvUpiText').textContent = upiId; // Bottom receipt if (%%%LATEX_BLOCK_38%%%('invoicePreview'); const existing = preview.querySelector('.bottom-receipt'); if (existing) existing.remove(); if (%%%LATEX_BLOCK_39%%%{%%%LATEX_BLOCK_40%%%('clubName').value = 'LIONS KARATE CLUB PUNE'; %%%LATEX_BLOCK_41%%%('clubAddress').value = 'Manaji Nagar, Nahre, Pune'; %%%LATEX_BLOCK_42%%%('invoiceNumber').value = ''; %%%LATEX_BLOCK_43%%%('date').value = new Date().toISOString().slice(0,10); %%%LATEX_BLOCK_44%%%('status').value = 'Unpaid'; %%%LATEX_BLOCK_45%%%('discountPercent').value = '0'; %%%LATEX_BLOCK_46%%%('verifiedBy').value = 'LIONS KARATE CLUB PUNE'; %%%LATEX_BLOCK_47%%%('theme').value = 'dark'; %%%LATEX_BLOCK_48%%%('clubName').value, regNumber: %%%LATEX_BLOCK_49%%%('clubAddress').value, clubPhone: %%%LATEX_BLOCK_50%%%('invoiceNumber').value, receiptNumber: %%%LATEX_BLOCK_51%%%('date').value, studentName: %%%LATEX_BLOCK_52%%%('status').value, taxPercent: %%%LATEX_BLOCK_53%%%('discountPercent').value, upiId: %%%LATEX_BLOCK_54%%%('verifiedBy').value }, items, notes: %%%LATEX_BLOCK_55%%%{%%%LATEX_BLOCK_56%%%{it.desc.replace(/"/g, '""')}",%%%LATEX_BLOCK_57%%%{it.price.toFixed(2)},%%%LATEX_BLOCK_58%%%{%%%LATEX_BLOCK_59%%%('invoicePreview'); // Ensure correct background color const originalBg = node.style.background; node.style.background = getComputedStyle(document.documentElement).getPropertyValue('--bg') || originalBg; try { // Render with html2canvas const canvas = await html2canvas(node, { scale: 2, backgroundColor: null, useCORS: true, logging: false }); const imgData = canvas.toDataURL('image/png'); // Create PDF const { jsPDF } = window.jspdf; const pdf = new jsPDF('p', 'mm', 'a4'); // Calculate dimensions const pdfWidth = pdf.internal.pageSize.getWidth(); const pdfHeight = pdf.internal.pageSize.getHeight(); const imgWidthPx = canvas.width; const imgHeightPx = canvas.height; const pxToMm = pdfWidth / imgWidthPx; const renderW = pdfWidth; const renderH = imgHeightPx * pxToMm; // Add image to PDF pdf.addImage(imgData, 'PNG', 0, 0, renderW, renderH); const filename = `Invoice_%%%LATEX_BLOCK_60%%%('invoiceNumber').value || %%%LATEX_BLOCK_61%%%('date').value) %%%LATEX_BLOCK_62%%%('addItemBtn').addEventListener('click', addNewItem); %%%LATEX_BLOCK_63%%%('exportJson').addEventListener('click', exportJson); %%%LATEX_BLOCK_64%%%('downloadPdf').addEventListener('click', downloadPdf); %%%LATEX_BLOCK_65%%%(id).addEventListener('input', renderInvoice); %%%LATEX_BLOCK_66%%%('newDesc').focus(); } // Start app when DOM is ready if (document.readyState === 'loading') { document.addEventListener('DOMContentLoaded', init); } else { init(); } </script> </body> </html>
